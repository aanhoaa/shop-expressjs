
<% include ../../partials/header_seller %>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.0/moment.min.js"></script>
<script src="/javascripts/assets/bootstrap-datetimepicker.js"></script>
<script src="/javascripts/assets/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" href="/stylesheets/css/report.css">
<link rel="stylesheet" href="/stylesheets/css/sales_bootstrap.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
    <%
      function getDate(tt) {
        var date = new Date(tt);
        var MyDate = new Date(date);
        var MyDateString;
      
        MyDate.setDate(MyDate.getDate());
        var hour = MyDate.getHours();
        var minutes = MyDate.getMinutes();
        var end = 'AM';
        if (hour > 11) {
          end = 'PM';
          hour -= 12;
        }
      
        MyDateString = ('0' + (MyDate.getMonth()+1)).slice(-2) + '/' + ('0' + MyDate.getDate()).slice(-2) + '/' + MyDate.getFullYear() + ' '+ hour + ':' + minutes + ' ' + end;
      
        return MyDateString;
      }
    %>

    <%
      if (voucher) {
          voucher.forEach(item => {
    %>
    <form action="" method="POST">
        <div class="modal-body">
          <div class="form-group" style="margin-left: 10px;">
            <label for="">Tên chương trình khuyến mãi</label>
            <input type="text" class="form-control" name="name" value="<%-item.name%>" style="margin-left: 16px; width: 90%" <%-status == -1 ? 'disabled' : 'required'%>> 
          </div>
            <div class="pick-date clearfix">
                <label for="">Thời gian diễn ra khuyến mãi: </label>
               <div class="col-sm-12">
                   <div class="row" style="display: flex;">
                      <div class='col-sm-5'>
                          <div>Ngày bắt đầu: </div>
                         <div class="form-group">
                            <div class='input-group date picker1' id='datetimepicker1' data-target-input="nearest">
                               <input type="text" class="form-control col-md-6 datetimepicker-input assessment-date-keypress" data-target="#datetimepicker1" data-toggle="picker1" autocomplete="off" <%-status == 1 ? 'required' : 'disabled'%> name="dateStart" value="<%-getDate(item.timestart)%>"/>
                               <span class="input-group-addon">
                               <span class="glyphicon glyphicon-calendar"></span>
                               </span>
                            </div>
                         </div>
                      </div>
   
                      <div class='col-sm-5'>
                       <div>Ngày kết thúc: </div>
                       <div class="form-group">
                          <div class='input-group date picker2' id='datetimepicker2' data-target-input="nearest">
                           <input type="text" class="form-control col-md-6 datetimepicker-input assessment-date-keypress" data-target="#datetimepicker2" data-toggle="picker2" autocomplete="off" <%-status == -1 ? 'disabled' : 'required'%> name="dateEnd" value="<%-getDate(item.timeend)%>"/>
                             <span class="input-group-addon">
                             <span class="glyphicon glyphicon-calendar"></span>
                             </span>
                          </div>
                       </div>
                    </div>
                      <script type="text/javascript">
                         $(function () {
                             $('.picker1').datetimepicker();
                             $('.picker2').datetimepicker({
                                   useCurrent: false
                               });
                               $(".picker1").on("dp.change", function (e) {
                           $('.picker2').datetimepicker('minDate', e.date);
                           });
                           $(".picker2").on("dp.change", function (e) {
                               $('.picker1').datetimepicker('maxDate', e.date);
                           });
                               });
                      </script>
                   </div>
                </div>
            </div>
            <div class="pick-category">
                <label for="">Áp dụng cho danh mục:</label>
                <select name="category" id="" class="form-control">
                <% if (data.length > 0) {
                    data.forEach(i => { %>
              
                   <option value="<%-i.id%>" <%-item.cate_id == i.id ? 'selected' : ''%>><%-i.name%></option>
               
               <%})} else {%>
                   <option value="">Chưa có sản phẩm</option>
               <%}%>
           </select>
            </div>
            <div class="pick-discount">
                <label for="">Phần trăm giảm</label>
                <input type="number" class="form-control" name="discount" value="<%-item.discount%>" <%-status == 1 ? 'required' : 'disabled'%>>
            </div>
            <div class="pick-discount">
              <label for="">Mã CODE</label>
              <input type="text" class="form-control" name="code" value="<%-item.code%>" disabled>
            </div>
           </div>
           <div class="modal-footer">
           <% if (status == -1) {%>
            <a href="/seller/sales" style="color: unset">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Trở lại</button>
            </a>
            <%} else {%>
                <a href="/seller/sales" style="color: unset">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                </a>
                <button type="submit" class="btn btn-primary">Thay đổi</button>
            <%}%>
          </div>
    </form>
    <%})}%>

<% include ../../partials/footer_admin %>